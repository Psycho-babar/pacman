!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=11)}({11:function(e,t,o){function n(e,t){const o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),t.appendChild(o)}function r(e){const t=document.getElementsByTagName("head")[0],o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e),t.appendChild(o)}async function i(e,t,o){const n=document.createElement("img"),r=await async function(e){const t=await fetch(e).then(e=>e.blob()).catch(e=>console.log(e));return await new Promise(e=>{const o=new FileReader;o.onload=()=>e(o.result),o.readAsDataURL(t)})}(e);n.setAttribute("id",o),n.setAttribute("src",r),n.style.display="none",t.appendChild(n)}function s(e,t,o){return window.postMessage({direction:"send-"+e,message:t,exId:o},"*")}console.group("NBS - cs");const a=function(e){let t="";const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=o.length;for(let r=0;r<e;r+=1)t+=o.charAt(Math.floor(Math.random()*n));return t}("20");chrome.runtime.sendMessage({browser:function(){const e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,o=!!document.documentMode,n=!o&&!!window.StyleMedia,r=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime);return{isOpera:e,isFirefox:t,isIE:o,isEdge:n,isChrome:r,isEdgeChromium:r&&-1!==navigator.userAgent.indexOf("Edg")}}()},e=>{console.log(e.response)}),chrome.storage.sync.get(["enable","learning"],({enable:e,learning:t})=>{if(!0===e){console.log("- 插件已啟動");const e=document.createElement("div");e.setAttribute("id","nbs-container"),e.setAttribute("exId",a),document.body.appendChild(e),n(chrome.runtime.getURL("subs.min.js"),e),n(chrome.runtime.getURL("third.min.js"),e),r(chrome.runtime.getURL("css/subs.css"));const o=new Map([["image/icon/dash-circle.svg","dash-circle-icon"],["image/icon/plus-circle.svg","plus-circle-icon"],["image/icon/arrow-counterclockwise.svg","arrow-counterclockwise-icon"],["image/icon/play-circle.svg","play-circle-icon"],["image/icon/scissors.svg","scissor-icon"],["image/icon/dash.svg","dash-icon"],["image/icon/plus.svg","plus-icon"],["image/icon/plus-square.svg","plus-square-icon"],["image/icon/x-square.svg","x-square-icon"],["image/icon/file-earmark-arrow-down.svg","download-icon"],["image/icon/file-earmark-arrow-up.svg","upload-icon"]]);for(const[t,n]of o)i(chrome.runtime.getURL(t),e,n);!0===t&&(r(chrome.runtime.getURL("css/learning.css")),function(e,t,o){const n=document.createElement("audio");n.setAttribute("type","audio/mpeg"),n.setAttribute("id",o),n.setAttribute("src",e),t.appendChild(n)}(chrome.runtime.getURL("resource/audio/click.mp3"),e,"typingSound"))}else!1===e?console.log("- 插件已關閉"):console.log("- 發生 undefined 錯誤 (enable)")}),window.addEventListener("message",e=>{if(!(e.source===window&&e.data&&e.data.direction&&e.data.exId))return;if(e.data.exId!==a)return;const{direction:t}=e.data;switch(t){case"req-storageValues":chrome.storage.sync.get(["subY","mainSize","secondSize","space","fontColor","backgroundColor","backgroundColorOpacity","imageBasedSubs","unlock","learning","autoPlayNextSub","skipPatternWhoSpeak","playTypingSound","mainLanguages","secondLanguages"],e=>{for(const[t,o]of Object.entries(e))void 0!==o&&s(t,o,a)});break;case"req-i18n":!function(e){const t=["web_mainMenuTitle","web_secondaryMenuTitle","web_downloadingMsg","web_errorMsg","web_completedMsg","web_showPrimarySub","web_hidePrimarySub","web_showSecondarySub","web_hideSecondarySub","web_popup_title","web_popup_description","web_popup_shortcuts","web_popup_repeat_key","web_popup_prev_key","web_popup_next_key","web_popup_togglePrimary_key","web_popup_toggleSecondary_key","web_popup_repeat_desc","web_popup_prev_desc","web_popup_next_desc","web_popup_togglePrimary_desc","web_popup_toggleSecondary_desc","web_popup_start","web_editor_subtract_begin","web_editor_add_begin","web_editor_subtract_end","web_editor_add_end","web_editor_play","web_editor_reset","web_editor_duplicate","web_editor_remove","web_editor_edit_text","web_editor_add_time_variable","web_editor_subtract_time_variable","web_editor_download","web_editor_upload","web_editor_mainSub","web_editor_secondarySub"],o={};for(let e=0,n=t.length;e<n;e+=1){const n=chrome.i18n.getMessage(t[e]);n.length>0&&(o[t[e]]=n)}s("i18n",o,e)}(a);break;case"save-mainLanguages":Array.isArray(e.data.message)&&chrome.storage.sync.set({mainLanguages:e.data.message},()=>console.log("- 儲存主字幕選項"));break;case"save-secondLanguages":Array.isArray(e.data.message)&&chrome.storage.sync.set({secondLanguages:e.data.message},()=>console.log("- 儲存副字幕選項"))}}),chrome.storage.onChanged.addListener(e=>{for(const[t,{newValue:o}]of Object.entries(e))s(t,o,a)})}});